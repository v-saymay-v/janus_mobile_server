$(function(){var f="recaptcha"===$("div.captcha").data("type");if($("#is_captcha_hide").val()==="true"){if(!f){$(".captcha_text").val("pass")}}else{f?$("div.captcha").attr("style",""):$("div.captcha").attr("style","padding-bottom: 20px;")}if(f){var e=$("html")[0].lang||"en-US";var a="en";var d=[{code:"en",value:"en-US"},{code:"es",value:"es-ES"},{code:"de",value:"de-DE"},{code:"zh-CN",value:"zh-CN"},{code:"zh-TW",value:"zh-TW"},{code:"fr",value:"fr-FR"},{code:"pt",value:"pt-PT"},{code:"ja",value:"jp-JP"},{code:"ru",value:"ru-RU"},{code:"ko",value:"ko-KO"},{code:"it",value:"it-IT"},{code:"vi",value:"vi-VN"}];for(var c in d){if(e===d[c].value){a=d[c].code}}var b=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src="//www.google.com/recaptcha/api.js?hl="+a;b.parentNode.insertBefore(c,b)}});var randNum=Math.random()+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:"");var userAgent=navigator.userAgent.toLowerCase();var isOpera=/opera|opr\/[\d]+/.test(userAgent);var isEdge=/edge\/(\d+)/.test(userAgent);var isChrome=!isOpera&&!isEdge&&/chrome/.test(userAgent)&&/webkit/.test(userAgent);var isSafari=!isOpera&&!isEdge&&!isChrome&&/safari/.test(userAgent);var captcha={audio:$(".captcha-audio").get(0),refreshBtn:$(".captcha-refresh"),switchType:$(".captcha-switch"),_previousPlayer:null,smartCaptchType:1,init:function(){var a=this;a.refreshBtn.on("click",function(){if(a.smartCaptchType==1){var d=$(this).parents(".captcha-section").find(".captcha-img");var c=d.data("type");var b=d.data("version");d.attr("src","/captcha-image"+(b!=undefined?b:"")+"?rnd="+Math.random()+(c!=undefined?"&type="+c:"")+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:""))}else{randNum=Math.random()+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:"");a.initHTML5Audio()}});a.switchType.on("click",function(){if(a._previousPlayer){a._previousPlayer.pause()}if($(this).parents(".captcha-section").find(".captcha-img").is(":visible")){$(this).parents(".captcha-section").find(".captcha-img").hide();$(this).parents(".captcha-section").find(".play_link").show();$(this).find(".icon-switch-txt").addClass("icon-switch-auo");a.initHTML5Audio();a.smartCaptchType=2}else{$(this).parents(".captcha-section").find(".captcha-img").show();$(this).parents(".captcha-section").find(".play_link").hide();var d=$(this).parents(".captcha-section").find(".captcha-img");var c=d.data("type");var b=d.data("version");d.attr("src","/captcha-image"+(b!=undefined?b:"")+"?rnd="+Math.random()+(c!=undefined?"&type="+c:"")+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:""));$(this).find(".icon-switch-txt").removeClass("icon-switch-auo");a.smartCaptchType=1}});$(".play_link").on("click",function(){if(isSafari){a.initHTML5Audio()}if(a.audio){a.audio.play()}return false})},initHTML5Audio:function(){this.audio.src="/captcha-audio?rnd="+randNum},_playAudio:function(){if(this._previousPlayer){this._previousPlayer.pause()}this.audio.src="/captcha-audio?rnd="+Math.random()+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:"");this.audio.play();this._previousPlayer=audio},refreshImg:function(){var c=$(".captcha-img");var b=c.data("type");var a=c.data("version");c.attr("src","/captcha-image"+(a!=undefined?a:"")+"?rnd="+Math.random()+(b!=undefined?"&type="+b:"")+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:""))},refreshAuo:function(){if(this._previousPlayer){this._previousPlayer.pause()}this.audio.src="/captcha-audio?rnd="+Math.random()+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:"")},refresh:function(){var b=this;if("recaptcha"==$("div.captcha").data("type")){if(window.grecaptcha){grecaptcha.reset()}}else{if(b.smartCaptchType==1){var d=$(".captcha-img");var c=d.data("type");var a=d.data("version");d.attr("src","/captcha-image"+(a!=undefined?a:"")+"?rnd="+Math.random()+(c!=undefined?"&type="+c:"")+(typeof(resourceAccountIdRoutingURl)!="undefined"?"&"+resourceAccountIdRoutingURl:""))}else{b.refreshAuo()}$(".captcha_text").val("")}},getValidationRules:function(){return{"g-recaptcha-response":{required:function(){return($("#is_captcha_hide").val()==="true")?false:"recaptcha"===$("div.captcha").data("type")}},captcha_text:{required:function(){return"smartcaptch"==$("div.captcha").data("type")}}}},addErrorClass:function(c,b){var a=c.attr("id");if("g-recaptcha-response"==a){c.parent().addClass("recaptcha-error")}else{c.parent().append(b)}},getValue:function(){return"recaptcha"==$("div.captcha").data("type")?$("#g-recaptcha-response").val():$(".captcha_text").val()},getUri:function(){return window.location.pathname},isSkip:function(){return $("#is_captcha_hide").val()==="true"},showCaptcha:function(){$("#is_captcha_hide").val("false");captcha.reCaptchaMode()?$("div.captcha").attr("style",""):$("div.captcha").attr("style","padding-bottom: 20px;")},getValueByDom:function(a){return"recaptcha"==a.find("div.captcha").data("type")?$("#g-recaptcha-response").val():a.find(".captcha_text").val()},reCaptchaMode:function(){var a=false;if("recaptcha"==$("div.captcha").data("type")){a=true}return a},setCaptchMode:function(a){if(a===1||a===2){this.smartCaptchType=a}},executeReCaptcha:function(a){if(this.reCaptchaMode()&&typeof grecaptcha!=="undefined"&&grecaptcha.execute){if(typeof a==="function"){SB.g_recaptcha_callback=a}grecaptcha.execute()}},isInvisible:function(){if(this.reCaptchaMode()){return $(".g-recaptcha").data("size")==="invisible"}return false}};captcha.init();